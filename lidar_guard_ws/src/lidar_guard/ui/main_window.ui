<?xml version="1.0" encoding="UTF-8"?>
<ui version="4.0">
 <class>MainWindow</class>
 <widget class="QMainWindow" name="MainWindow">
  <property name="windowTitle">
   <string>Platform GUI</string>
  </property>
  <property name="geometry">
   <rect><x>100</x><y>100</y><width>1280</width><height>800</height></rect>
  </property>

  <widget class="QWidget" name="centralwidget">
   <layout class="QVBoxLayout" name="centralLayout">
    <property name="spacing"><number>12</number></property>

    <item>
     <widget class="QStackedWidget" name="stackRoot">
      <property name="currentIndex"><number>0</number></property>

      <!-- ===================== PAGE: IDLE ===================== -->
      <widget class="QWidget" name="pageIdle">
       <layout class="QVBoxLayout" name="idleLayout">
        <property name="spacing"><number>12</number></property>

        <item>
         <widget class="QLabel" name="lblIdleMapTitle">
          <property name="text"><string>Карта</string></property>
          <property name="alignment"><set>Qt::AlignLeft|Qt::AlignVCenter</set></property>
          <property name="font">
           <font><pointsize>18</pointsize><bold>true</bold><weight>75</weight></font>
          </property>
         </widget>
        </item>

        <item>
         <widget class="QGraphicsView" name="mapViewIdle">
          <property name="sizePolicy">
           <sizepolicy hsizetype="Expanding" vsizetype="Expanding">
            <horstretch>0</horstretch><verstretch>0</verstretch>
           </sizepolicy>
          </property>
          <property name="minimumSize"><size><width>800</width><height>450</height></size></property>
          <property name="styleSheet">
           <string notr="true">background:#f5f5f5; border:1px solid #dcdcdc;</string>
          </property>
         </widget>
        </item>

        <!-- Кнопочная панель IDLE -->
        <item>
         <widget class="QWidget" name="idleButtonsBar">
          <layout class="QHBoxLayout" name="idleButtonsLayout">
           <property name="spacing"><number>12</number></property>

           <item>
            <widget class="QPushButton" name="btnChooseMap">
             <property name="text"><string>Выбор карты</string></property>
             <property name="sizePolicy">
              <sizepolicy hsizetype="Preferred" vsizetype="Fixed">
               <horstretch>0</horstretch><verstretch>0</verstretch>
              </sizepolicy>
             </property>
             <property name="minimumSize"><size><width>200</width><height>60</height></size></property>
             <property name="font"><font><pointsize>16</pointsize></font></property>
             <property name="toolTip"><string>Открыть экран выбора карты</string></property>
             <property name="styleSheet">
              <string notr="true">background:#eaeaea; border:1px solid #cfcfcf; border-radius:8px; padding:10px 16px;</string>
             </property>
            </widget>
           </item>

           <item>
            <widget class="QPushButton" name="btnLocalization">
             <property name="text"><string>Локализация</string></property>
             <property name="sizePolicy">
              <sizepolicy hsizetype="Preferred" vsizetype="Fixed">
               <horstretch>0</horstretch><verstretch>0</verstretch>
              </sizepolicy>
             </property>
             <property name="minimumSize"><size><width>160</width><height>60</height></size></property>
             <property name="toolTip"><string>Автолокализация (заглушка)</string></property>
            </widget>
           </item>

           <item>
            <widget class="QPushButton" name="btnManualLocalization">
             <property name="text"><string>Локализация вручную</string></property>
             <property name="checkable"><bool>true</bool></property>
             <property name="sizePolicy">
              <sizepolicy hsizetype="Preferred" vsizetype="Fixed">
               <horstretch>0</horstretch><verstretch>0</verstretch>
              </sizepolicy>
             </property>
             <property name="minimumSize"><size><width>220</width><height>60</height></size></property>
             <property name="toolTip"><string>Включить режим: клик на карте = задать позу робота</string></property>
            </widget>
           </item>

           <!-- НОВОЕ: выбор цели на IDLE -->
           <item>
            <widget class="QPushButton" name="btnSelectGoalIdle">
             <property name="text"><string>Выбрать цель</string></property>
             <property name="checkable"><bool>true</bool></property>
             <property name="minimumSize"><size><width>180</width><height>60</height></size></property>
             <property name="toolTip"><string>Клик на карте = выбрать контрольную точку (к ближайшему узлу сплайна)</string></property>
            </widget>
           </item>

           <item>
            <spacer name="idleButtonsSpacer">
             <property name="orientation"><enum>Qt::Horizontal</enum></property>
             <property name="sizeHint" stdset="0"><size><width>40</width><height>20</height></size></property>
            </spacer>
           </item>

           <item>
            <widget class="QPushButton" name="btnStart">
             <property name="text"><string>Пуск</string></property>
             <property name="sizePolicy">
              <sizepolicy hsizetype="Preferred" vsizetype="Fixed">
               <horstretch>0</horstretch><verstretch>0</verstretch>
              </sizepolicy>
             </property>
             <property name="minimumSize"><size><width>220</width><height>70</height></size></property>
             <property name="font"><font><pointsize>18</pointsize><bold>true</bold></font></property>
             <property name="toolTip"><string>Запуск миссии</string></property>
             <property name="styleSheet">
              <string notr="true">background:#2d6; color:white; border-radius:10px; padding:12px 20px;</string>
             </property>
            </widget>
           </item>

          </layout>
         </widget>
        </item>

       </layout>
      </widget>

      <!-- ===================== PAGE: DRIVE ===================== -->
      <widget class="QWidget" name="pageDrive">
       <layout class="QVBoxLayout" name="driveRootLayout">
        <property name="spacing"><number>12</number></property>

        <!-- TOP BAR -->
        <item>
         <widget class="QWidget" name="driveTopBar">
          <layout class="QHBoxLayout" name="driveTopBarLayout">
           <property name="spacing"><number>12</number></property>

           <item>
            <widget class="QPushButton" name="btnStartStop">
             <property name="text"><string>Пуск</string></property>
             <property name="checkable"><bool>true</bool></property>
             <property name="minimumSize"><size><width>180</width><height>56</height></size></property>
             <property name="styleSheet">
              <string notr="true">background:#2d6; color:white; border-radius:10px; padding:10px 18px;</string>
             </property>
            </widget>
           </item>

           <item><widget class="QLabel" name="lblSpeed">
             <property name="text"><string>Скорость: — м/с</string></property>
             <property name="font"><font><pointsize>13</pointsize></font></property>
            </widget></item>

           <item><widget class="QLabel" name="lblMinDist">
             <property name="text"><string>Мин. дистанция: — м</string></property>
             <property name="font"><font><pointsize>13</pointsize></font></property>
            </widget></item>

           <item><widget class="QLabel" name="lblGuardState">
             <property name="text"><string>Состояние: —</string></property>
             <property name="font"><font><pointsize>13</pointsize></font></property>
            </widget></item>

           <item><widget class="QLabel" name="lblSafetyStop">
             <property name="text"><string>STOP: —</string></property>
             <property name="font"><font><pointsize>13</pointsize></font></property>
            </widget></item>

           <item>
            <spacer name="driveTopSpacer">
             <property name="orientation"><enum>Qt::Horizontal</enum></property>
             <property name="sizeHint" stdset="0"><size><width>40</width><height>20</height></size></property>
            </spacer>
           </item>

           <!-- НОВОЕ: выбор цели на DRIVE -->
           <item>
            <widget class="QPushButton" name="btnSelectGoalDrive">
             <property name="text"><string>Цель</string></property>
             <property name="checkable"><bool>true</bool></property>
             <property name="minimumSize"><size><width>120</width><height>50</height></size></property>
            </widget>
           </item>

           <item>
            <widget class="QPushButton" name="btnMapPicker">
             <property name="text"><string>Карты</string></property>
             <property name="minimumSize"><size><width>140</width><height>50</height></size></property>
             <property name="styleSheet">
              <string notr="true">background:#eaeaea; border:1px solid #cfcfcf; border-radius:8px;</string>
             </property>
            </widget>
           </item>

           <item>
            <widget class="QPushButton" name="btnEStop">
             <property name="text"><string>E-STOP</string></property>
             <property name="minimumSize"><size><width>140</width><height>56</height></size></property>
             <property name="styleSheet">
              <string notr="true">background:#d64545; color:white; border-radius:10px; font-weight:bold; padding:10px 18px;</string>
             </property>
            </widget>
           </item>

          </layout>
         </widget>
        </item>

        <!-- SPLIT: MAP | RADAR -->
        <item>
         <widget class="QSplitter" name="driveSplitter">
          <property name="orientation"><enum>Qt::Horizontal</enum></property>
          <property name="handleWidth"><number>6</number></property>
          <property name="opaqueResize"><bool>true</bool></property>

          <!-- LEFT (MAP) -->
          <widget class="QWidget" name="driveLeftPanel">
           <layout class="QVBoxLayout" name="driveLeftLayout">
            <property name="spacing"><number>8</number></property>

            <item><widget class="QLabel" name="lblDriveMapTitle">
              <property name="text"><string>Карта</string></property>
              <property name="font"><font><pointsize>16</pointsize><bold>true</bold></font></property>
             </widget></item>

            <item><widget class="QGraphicsView" name="mapViewDrive">
              <property name="sizePolicy">
               <sizepolicy hsizetype="Expanding" vsizetype="Expanding">
                <horstretch>0</horstretch><verstretch>0</verstretch>
               </sizepolicy>
              </property>
              <property name="minimumSize"><size><width>600</width><height>450</height></size></property>
              <property name="styleSheet">
               <string notr="true">background:#f5f5f5; border:1px solid #dcdcdc;</string>
              </property>
             </widget></item>

           </layout>
          </widget>

          <!-- RIGHT (RADAR) -->
          <widget class="QWidget" name="driveRightPanel">
           <layout class="QVBoxLayout" name="driveRightLayout">
            <property name="spacing"><number>8</number></property>

            <item><widget class="QLabel" name="lblDriveRadarTitle">
              <property name="text"><string>Радар</string></property>
              <property name="font"><font><pointsize>16</pointsize><bold>true</bold></font></property>
             </widget></item>

            <item><widget class="QGraphicsView" name="radarViewDrive">
              <property name="sizePolicy">
               <sizepolicy hsizetype="Expanding" vsizetype="Expanding">
                <horstretch>0</horstretch><verstretch>0</verstretch>
               </sizepolicy>
              </property>
              <property name="minimumSize"><size><width>600</width><height>450</height></size></property>
              <property name="styleSheet">
               <string notr="true">background:#f5f5f5; border:1px solid #dcdcdc;</string>
              </property>
             </widget></item>

           </layout>
          </widget>

         </widget>
        </item>

       </layout>
      </widget>

      <!-- ===================== PAGE: MAPS ===================== -->
      <widget class="QWidget" name="pageMaps">
       <layout class="QVBoxLayout" name="mapsLayout">
        <property name="spacing"><number>12</number></property>

        <!-- Toolbar -->
        <item>
         <widget class="QWidget" name="mapsToolbar">
          <layout class="QHBoxLayout" name="mapsToolbarLayout">
           <property name="spacing"><number>12</number></property>

           <item><widget class="QLabel" name="lblMapsTitle">
             <property name="text"><string>Выбор карты (~/Downloads/maps_repo)</string></property>
             <property name="font"><font><pointsize>18</pointsize><bold>true</bold></font></property>
            </widget></item>

           <item>
            <spacer name="mapsToolbarSpacer">
             <property name="orientation"><enum>Qt::Horizontal</enum></property>
             <property name="sizeHint" stdset="0"><size><width>40</width><height>20</height></size></property>
            </spacer>
           </item>

           <!-- Вариант B: только диалог выбора PNG -->
           <item><widget class="QPushButton" name="btnChooseFromFolder">
             <property name="text"><string>Выбрать карту…</string></property>
             <property name="minimumSize"><size><width>180</width><height>50</height></size></property>
             <property name="toolTip"><string>Открыть PNG из ~/Downloads/maps_repo</string></property>
            </widget></item>

           <item><widget class="QPushButton" name="btnMapsBack">
             <property name="text"><string>Назад</string></property>
             <property name="minimumSize"><size><width>140</width><height>50</height></size></property>
            </widget></item>

          </layout>
         </widget>
        </item>

        <!-- Подсказка -->
        <item>
         <widget class="QLabel" name="lblMapsHint">
          <property name="text">
           <string>Папка: ~/Downloads/maps_repo. Нажмите «Выбрать карту…». Если рядом есть файл .json — сплайн загрузится автоматически.</string>
          </property>
          <property name="alignment"><set>Qt::AlignLeft|Qt::AlignTop</set></property>
         </widget>
        </item>

       </layout>
      </widget>

     </widget>
    </item>
   </layout>
  </widget>

  <widget class="QStatusBar" name="statusbar"/>
 </widget>
 <resources/>
 <connections/>
</ui>
